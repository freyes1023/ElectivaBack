{
    "sourceFile": "functions/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 37,
            "patches": [
                {
                    "date": 1699853502474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1699853515023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,15 +23,15 @@\n \n \n const indexRouter = require(\"./routes/index\");\n const usersRouter = require(\"./routes/users\");\n-const productsRouter = require(\"./routes/products\")\n+const productsRouter = require(\"./routes/products\");\n \n app.use(\"/\", indexRouter);\n app.use(\"/users\", usersRouter);\n \n \n-//app.use(\"/\", indexRouter);\n+// app.use(\"/\", indexRouter);\n app.use(\"/products\", productsRouter);\n \n app.listen(port, () => {\n     console.log(`Server is running on port ${port}`);\n"
                },
                {
                    "date": 1699853613044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n const app = express();\n \n app.use(logger(\"dev\"));\n app.use(express.json());\n-app.use(express.urlencoded({extended: false }));\n+app.use(express.urlencoded({extended: false}));\n app.use(cookieParser());\n app.use(cors());\n \n \n@@ -33,8 +33,9 @@\n // app.use(\"/\", indexRouter);\n app.use(\"/products\", productsRouter);\n \n app.listen(port, () => {\n-    console.log(`Server is running on port ${port}`);\n-})\n+  console.log(`Server is running on port ${port}`);\n+});\n \n-module.exports = app;\n+// module.exports = app;\n+exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699854342777,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,11 @@\n app.use(cookieParser());\n app.use(cors());\n \n \n-const indexRouter = require(\"./routes/index\");\n-const usersRouter = require(\"./routes/users\");\n-const productsRouter = require(\"./routes/products\");\n+const indexRouter = require(\"../routes/index\");\n+const usersRouter = require(\"../routes/users\");\n+const productsRouter = require(\"../routes/products\");\n \n app.use(\"/\", indexRouter);\n app.use(\"/users\", usersRouter);\n \n"
                },
                {
                    "date": 1699856087428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,10 +32,12 @@\n \n // app.use(\"/\", indexRouter);\n app.use(\"/products\", productsRouter);\n \n+/*\n app.listen(port, () => {\n   console.log(`Server is running on port ${port}`);\n });\n+ */\n \n // module.exports = app;\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699856110287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n-const port = 3000;\n+// const port = 3000;\n \n const app = express();\n \n app.use(logger(\"dev\"));\n"
                },
                {
                    "date": 1699858836681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n app.use(cookieParser());\n app.use(cors());\n \n \n-const indexRouter = require(\"../routes/index\");\n+/* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n const productsRouter = require(\"../routes/products\");\n \n app.use(\"/\", indexRouter);\n@@ -31,9 +31,9 @@\n \n \n // app.use(\"/\", indexRouter);\n app.use(\"/products\", productsRouter);\n-\n+*/\n /*\n app.listen(port, () => {\n   console.log(`Server is running on port ${port}`);\n });\n"
                },
                {
                    "date": 1699859120261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,18 +21,18 @@\n app.use(cookieParser());\n app.use(cors());\n \n \n+const productsRouter = require(\"../routes/products.js\");\n+app.use(\"/products\", productsRouter);\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n-const productsRouter = require(\"../routes/products\");\n \n app.use(\"/\", indexRouter);\n app.use(\"/users\", usersRouter);\n \n \n // app.use(\"/\", indexRouter);\n-app.use(\"/products\", productsRouter);\n */\n /*\n app.listen(port, () => {\n   console.log(`Server is running on port ${port}`);\n"
                },
                {
                    "date": 1699890534834,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n app.use(cookieParser());\n app.use(cors());\n \n \n-const productsRouter = require(\"../routes/products.js\");\n+const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter);\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n"
                },
                {
                    "date": 1699890695377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n //   functions.logger.info(\"Hello logs!\", {structuredData: true});\n //   response.send(\"Hello from Firebase!\");\n // });\n-const express = require(\"express\");\n+/* const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n@@ -22,9 +22,9 @@\n app.use(cors());\n \n \n const productsRouter = require(\"../routes/products\");\n-app.use(\"/products\", productsRouter);\n+app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n app.use(\"/\", indexRouter);\n@@ -39,5 +39,6 @@\n });\n  */\n \n // module.exports = app;\n+const app = require(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699908278073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,6 +39,6 @@\n });\n  */\n \n // module.exports = app;\n-const app = require(\"../app\");\n+const app = require(\"../app.js\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699908894040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n //   functions.logger.info(\"Hello logs!\", {structuredData: true});\n //   response.send(\"Hello from Firebase!\");\n // });\n-/* const express = require(\"express\");\n+ const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n@@ -20,9 +20,9 @@\n app.use(express.urlencoded({extended: false}));\n app.use(cookieParser());\n app.use(cors());\n \n-\n+/*\n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n@@ -39,6 +39,6 @@\n });\n  */\n \n // module.exports = app;\n-const app = require(\"../app.js\");\n+// const app = use(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699908935819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,8 +20,12 @@\n app.use(express.urlencoded({extended: false}));\n app.use(cookieParser());\n app.use(cors());\n \n+app.get('/', (request, response)=>{\n+  response.send(\"The best app\");\n+}\n+\n /*\n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n"
                },
                {
                    "date": 1699908972194,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,11 +20,11 @@\n app.use(express.urlencoded({extended: false}));\n app.use(cookieParser());\n app.use(cors());\n \n-app.get('/', (request, response)=>{\n+app.get(\"/\", (request, response)=>{\n   response.send(\"The best app\");\n-}\n+});\n \n /*\n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter); */\n"
                },
                {
                    "date": 1699908977547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n //   functions.logger.info(\"Hello logs!\", {structuredData: true});\n //   response.send(\"Hello from Firebase!\");\n // });\n- const express = require(\"express\");\n+const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n"
                },
                {
                    "date": 1699909177406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,11 +24,11 @@\n app.get(\"/\", (request, response)=>{\n   response.send(\"The best app\");\n });\n \n-/*\n const productsRouter = require(\"../routes/products\");\n-app.use(\"/products\", productsRouter); */\n+app.use(\"/products\", productsRouter);\n+\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n app.use(\"/\", indexRouter);\n"
                },
                {
                    "date": 1699909644434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,16 @@\n const functions = require(\"firebase-functions\");\n+const app = require(\"../app\");\n \n // // Create and deploy your first functions\n // // https://firebase.google.com/docs/functions/get-started\n //\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n //   functions.logger.info(\"Hello logs!\", {structuredData: true});\n //   response.send(\"Hello from Firebase!\");\n // });\n-const express = require(\"express\");\n+/* const express = require(\"express\");\n+const router = express.Router();\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n@@ -26,9 +28,9 @@\n });\n \n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter);\n-\n+ */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n app.use(\"/\", indexRouter);\n@@ -43,6 +45,6 @@\n });\n  */\n \n // module.exports = app;\n-// const app = use(\"../app\");\n+// const app = request(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699910014588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,15 @@\n const functions = require(\"firebase-functions\");\n-const app = require(\"../app\");\n+// const app = require(\"../app\");\n \n-// // Create and deploy your first functions\n-// // https://firebase.google.com/docs/functions/get-started\n-//\n-// exports.helloWorld = functions.https.onRequest((request, response) => {\n-//   functions.logger.info(\"Hello logs!\", {structuredData: true});\n-//   response.send(\"Hello from Firebase!\");\n-// });\n-/* const express = require(\"express\");\n-const router = express.Router();\n+const express = require(\"express\");\n+const app = express();\n+/* const router = express.Router();\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n \n-const app = express();\n \n app.use(logger(\"dev\"));\n app.use(express.json());\n app.use(express.urlencoded({extended: false}));\n@@ -46,5 +39,14 @@\n  */\n \n // module.exports = app;\n // const app = request(\"../app\");\n+// Single routing\n+const router = express.Router();\n+\n+router.get(\"/\", (req, res, next) => {\n+  res.send(\"Hello World\");\n+});\n+\n+app.use(router);\n+\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699910136028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,8 +40,9 @@\n \n // module.exports = app;\n // const app = request(\"../app\");\n // Single routing\n+// eslint-disable-next-line new-cap\n const router = express.Router();\n \n router.get(\"/\", (req, res, next) => {\n   res.send(\"Hello World\");\n"
                },
                {
                    "date": 1699910547814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n // const app = require(\"../app\");\n \n const express = require(\"express\");\n const app = express();\n+\n /* const router = express.Router();\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n@@ -46,8 +47,10 @@\n \n router.get(\"/\", (req, res, next) => {\n   res.send(\"Hello World\");\n });\n+const productsRouter = require(\"./routes/products\");\n+router.use(\"/products\", productsRouter);\n \n app.use(router);\n \n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699911414340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,12 @@\n-const functions = require(\"firebase-functions\");\n-// const app = require(\"../app\");\n+import * as functions from 'firebase-functions';\n+import * as express from 'express';\n+import * as app from '../app';\n \n-const express = require(\"express\");\n-const app = express();\n \n+\n+//const app = express();\n+\n /* const router = express.Router();\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n"
                },
                {
                    "date": 1699911835033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,11 @@\n-import * as functions from 'firebase-functions';\n-import * as express from 'express';\n-import * as app from '../app';\n+import * as functions from \"firebase-functions\";\n+import * as express from \"express\";\n+import * as app from \"../app\";\n \n \n+// const app = express();\n \n-//const app = express();\n-\n /* const router = express.Router();\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n"
                },
                {
                    "date": 1699912254096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,20 @@\n-import * as functions from \"firebase-functions\";\n-import * as express from \"express\";\n-import * as app from \"../app\";\n+const functions = require(\"firebase-functions\");\n \n-\n-// const app = express();\n-\n-/* const router = express.Router();\n+// // Create and deploy your first functions\n+// // https://firebase.google.com/docs/functions/get-started\n+//\n+// exports.helloWorld = functions.https.onRequest((request, response) => {\n+//   functions.logger.info(\"Hello logs!\", {structuredData: true});\n+//   response.send(\"Hello from Firebase!\");\n+// });\n+const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n \n+const app = express();\n \n app.use(logger(\"dev\"));\n app.use(express.json());\n app.use(express.urlencoded({extended: false}));\n@@ -21,11 +24,11 @@\n app.get(\"/\", (request, response)=>{\n   response.send(\"The best app\");\n });\n \n+/*\n const productsRouter = require(\"../routes/products\");\n-app.use(\"/products\", productsRouter);\n- */\n+app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n app.use(\"/\", indexRouter);\n@@ -40,18 +43,6 @@\n });\n  */\n \n // module.exports = app;\n-// const app = request(\"../app\");\n-// Single routing\n-// eslint-disable-next-line new-cap\n-const router = express.Router();\n-\n-router.get(\"/\", (req, res, next) => {\n-  res.send(\"Hello World\");\n-});\n-const productsRouter = require(\"./routes/products\");\n-router.use(\"/products\", productsRouter);\n-\n-app.use(router);\n-\n+// const app = use(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699912592786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,34 @@\n app.get(\"/\", (request, response)=>{\n   response.send(\"The best app\");\n });\n \n+// eslint-disable-next-line new-cap\n+const router = express.Router();\n+\n+// Require controller modules.\n+const productController = require(\"../controllers/products\");\n+\n+\n+// product ROUTES ///\n+\n+// GET request for list of all products.\n+router.get(\"/\", productController.product_list);\n+\n+// POST request for creating product.\n+router.post(\"/\", productController.product_create_post);\n+\n+// delete request to delete product.\n+router.delete(\"/:id\", productController.product_delete_get);\n+\n+// patch request to update product.\n+router.patch(\"/:id\", productController.product_update_get);\n+\n+// put request to update product.\n+router.put(\"/:id\", productController.product_update_post);\n+\n+// GET request for one product.\n+router.get(\"/:id\", productController.product_detail);\n /*\n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n"
                },
                {
                    "date": 1699914221282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n // eslint-disable-next-line new-cap\n const router = express.Router();\n \n // Require controller modules.\n-const productController = require(\"../controllers/products\");\n+const productController = require(\"../controllers/products.js\");\n \n \n // product ROUTES ///\n \n"
                },
                {
                    "date": 1699914578579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,9 @@\n const functions = require(\"firebase-functions\");\n+const {initializeApp} = require(\"firebase-admin/app\");\n \n+initializeApp();\n+\n // // Create and deploy your first functions\n // // https://firebase.google.com/docs/functions/get-started\n //\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n"
                },
                {
                    "date": 1699915243018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,14 @@\n const functions = require(\"firebase-functions\");\n-const {initializeApp} = require(\"firebase-admin/app\");\n \n-initializeApp();\n-\n // // Create and deploy your first functions\n // // https://firebase.google.com/docs/functions/get-started\n //\n // exports.helloWorld = functions.https.onRequest((request, response) => {\n //   functions.logger.info(\"Hello logs!\", {structuredData: true});\n //   response.send(\"Hello from Firebase!\");\n // });\n-const express = require(\"express\");\n+/* const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n@@ -23,39 +20,9 @@\n app.use(express.urlencoded({extended: false}));\n app.use(cookieParser());\n app.use(cors());\n \n-app.get(\"/\", (request, response)=>{\n-  response.send(\"The best app\");\n-});\n \n-// eslint-disable-next-line new-cap\n-const router = express.Router();\n-\n-// Require controller modules.\n-const productController = require(\"../controllers/products.js\");\n-\n-\n-// product ROUTES ///\n-\n-// GET request for list of all products.\n-router.get(\"/\", productController.product_list);\n-\n-// POST request for creating product.\n-router.post(\"/\", productController.product_create_post);\n-\n-// delete request to delete product.\n-router.delete(\"/:id\", productController.product_delete_get);\n-\n-// patch request to update product.\n-router.patch(\"/:id\", productController.product_update_get);\n-\n-// put request to update product.\n-router.put(\"/:id\", productController.product_update_post);\n-\n-// GET request for one product.\n-router.get(\"/:id\", productController.product_detail);\n-/*\n const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter); */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n@@ -72,6 +39,6 @@\n });\n  */\n \n // module.exports = app;\n-// const app = use(\"../app\");\n+const app = require(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699915524453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,11 @@\n const functions = require(\"firebase-functions\");\n+const admin = require(\"firebase-admin\");\n+try {\n+  admin.initializeApp(functions.config().firebase);\n+} catch (e) {\n+  console.log(e);\n+}\n \n // // Create and deploy your first functions\n // // https://firebase.google.com/docs/functions/get-started\n //\n"
                },
                {
                    "date": 1699938302059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,31 @@\n const functions = require(\"firebase-functions\");\n+const asyncHandler = require(\"express-async-handler\");\n+\n+// Config DB\n+\n const admin = require(\"firebase-admin\");\n-try {\n+\n+const serviceAccount = require(\n+    \"../back-electiva-firebase-adminsdk-wjbei-6f37904c59.json\");\n+\n+admin.initializeApp({\n+  credential: admin.credential.cert(serviceAccount),\n+});\n+\n+const db = admin.firestore();\n+\n+//\n+\n+/* const admin = require(\"firebase-admin\");\n+ try {\n   admin.initializeApp(functions.config().firebase);\n } catch (e) {\n   console.log(e);\n-}\n+} */\n \n-// // Create and deploy your first functions\n-// // https://firebase.google.com/docs/functions/get-started\n-//\n-// exports.helloWorld = functions.https.onRequest((request, response) => {\n-//   functions.logger.info(\"Hello logs!\", {structuredData: true});\n-//   response.send(\"Hello from Firebase!\");\n-// });\n-/* const express = require(\"express\");\n+\n+const express = require(\"express\");\n const cors = require(\"cors\");\n const cookieParser = require(\"cookie-parser\");\n const logger = require(\"morgan\");\n // const port = 3000;\n@@ -27,10 +38,98 @@\n app.use(cookieParser());\n app.use(cors());\n \n \n-const productsRouter = require(\"../routes/products\");\n-app.use(\"/products\", productsRouter); */\n+// Catalogue Routes\n+\n+// eslint-disable-next-line new-cap\n+const router = express.Router();\n+\n+// Require controller modules.\n+// const product_controller = require(\"../controllers/products\");\n+\n+\n+// product ROUTES ///\n+\n+// GET request for list of all products.\n+router.get(\"/\", productList);\n+\n+// POST request for creating product.\n+router.post(\"/\", product_create_post);\n+\n+// delete request to delete product.\n+router.delete(\"/:id\", product_delete_get);\n+\n+// patch request to update product.\n+router.patch(\"/:id\", product_update_get);\n+\n+// put request to update product.\n+router.put(\"/:id\", product_update_post);\n+\n+// GET request for one product.\n+router.get(\"/:id\", product_detail);\n+\n+//\n+// Controllers\n+\n+// const config = require('../utils/config')\n+\n+const collectionName = \"Products\";\n+\n+// Display list of all products.\n+const productList = asyncHandler(async (req, res, next) => {\n+  console.log(\"productList\");\n+  const ref = db.collection(collectionName);\n+  await ref.get().then((snapshot) => {\n+    const data = snapshot.docs.map((doc) => ({\n+      id: doc.id,\n+      ...doc.data(),\n+    }));\n+    return res.status(200).send(data);\n+  });\n+});\n+\n+// Display detail page for a specific product.\n+const product_detail = asyncHandler(async (req, res, next) => {\n+  const ref = db.collection(collectionName).doc(req.params.id);\n+  // Create a query against the collection.\n+  await ref.get().then((snapshot) => {\n+    return res.status(200).send(snapshot.data());\n+  });\n+});\n+\n+\n+// Handle product create on POST.\n+const product_create_post = asyncHandler(async (req, res, next) => {\n+  const ref = db.collection(collectionName);\n+  await ref.add(req.body);\n+  res.status(201).json({msj: \"created\"});\n+});\n+\n+// Display product delete form on GET.\n+const product_delete_get = asyncHandler(async (req, res, next) => {\n+  const ref = db.collection(collectionName).doc(req.params.id);\n+  await ref.delete();\n+  res.send(\"deleted\");\n+});\n+\n+// Display product update form on GET.\n+const product_update_get = asyncHandler(async (req, res, next) => {\n+  const ref = db.collection(collectionName).doc(req.params.id);\n+  ref.update(req.body);\n+  res.status(202).json({msj: \"updated\"});\n+});\n+\n+// Handle product update on POST.\n+const product_update_post = asyncHandler(async (req, res, next) => {\n+  const ref = db.collection(collectionName).doc(req.params.id);\n+  ref.update(req.body);\n+  res.status(202).json({msj: \"updated\"});\n+});\n+\n+//\n+/* const productsRouter = require(\"../routes/products\");\n+app.use(\"/products\", productsRouter);  */\n /* const indexRouter = require(\"../routes/index\");\n const usersRouter = require(\"../routes/users\");\n \n app.use(\"/\", indexRouter);\n@@ -45,6 +144,6 @@\n });\n  */\n \n // module.exports = app;\n-const app = require(\"../app\");\n+// const app = require(\"../app\");\n exports.app = functions.https.onRequest(app);\n"
                },
                {
                    "date": 1699938693140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,21 +53,21 @@\n // GET request for list of all products.\n router.get(\"/\", productList);\n \n // POST request for creating product.\n-router.post(\"/\", product_create_post);\n+router.post(\"/\", productCreate);\n \n // delete request to delete product.\n-router.delete(\"/:id\", product_delete_get);\n+router.delete(\"/:id\", productDelete);\n \n // patch request to update product.\n-router.patch(\"/:id\", product_update_get);\n+router.patch(\"/:id\", productUpdate);\n \n // put request to update product.\n-router.put(\"/:id\", product_update_post);\n+router.put(\"/:id\", productUpdate);\n \n // GET request for one product.\n-router.get(\"/:id\", product_detail);\n+router.get(\"/:id\", productDetail);\n \n //\n // Controllers\n \n@@ -88,9 +88,9 @@\n   });\n });\n \n // Display detail page for a specific product.\n-const product_detail = asyncHandler(async (req, res, next) => {\n+const productDetail = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName).doc(req.params.id);\n   // Create a query against the collection.\n   await ref.get().then((snapshot) => {\n     return res.status(200).send(snapshot.data());\n@@ -98,34 +98,34 @@\n });\n \n \n // Handle product create on POST.\n-const product_create_post = asyncHandler(async (req, res, next) => {\n+const productCreate = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName);\n   await ref.add(req.body);\n   res.status(201).json({msj: \"created\"});\n });\n \n // Display product delete form on GET.\n-const product_delete_get = asyncHandler(async (req, res, next) => {\n+const productDelete = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName).doc(req.params.id);\n   await ref.delete();\n   res.send(\"deleted\");\n });\n \n // Display product update form on GET.\n-const product_update_get = asyncHandler(async (req, res, next) => {\n+const productUpdate = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName).doc(req.params.id);\n   ref.update(req.body);\n   res.status(202).json({msj: \"updated\"});\n });\n \n // Handle product update on POST.\n-const product_update_post = asyncHandler(async (req, res, next) => {\n+/* const product_update_post = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName).doc(req.params.id);\n   ref.update(req.body);\n   res.status(202).json({msj: \"updated\"});\n-});\n+}); */\n \n //\n /* const productsRouter = require(\"../routes/products\");\n app.use(\"/products\", productsRouter);  */\n"
                },
                {
                    "date": 1699939346073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,29 +47,8 @@\n // Require controller modules.\n // const product_controller = require(\"../controllers/products\");\n \n \n-// product ROUTES ///\n-\n-// GET request for list of all products.\n-router.get(\"/\", productList);\n-\n-// POST request for creating product.\n-router.post(\"/\", productCreate);\n-\n-// delete request to delete product.\n-router.delete(\"/:id\", productDelete);\n-\n-// patch request to update product.\n-router.patch(\"/:id\", productUpdate);\n-\n-// put request to update product.\n-router.put(\"/:id\", productUpdate);\n-\n-// GET request for one product.\n-router.get(\"/:id\", productDetail);\n-\n-//\n // Controllers\n \n // const config = require('../utils/config')\n \n@@ -118,8 +97,31 @@\n   ref.update(req.body);\n   res.status(202).json({msj: \"updated\"});\n });\n \n+\n+// product ROUTES ///\n+\n+// GET request for list of all products.\n+router.get(\"/\", productList);\n+\n+// POST request for creating product.\n+router.post(\"/\", productCreate);\n+\n+// delete request to delete product.\n+router.delete(\"/:id\", productDelete);\n+\n+// patch request to update product.\n+router.patch(\"/:id\", productUpdate);\n+\n+// put request to update product.\n+router.put(\"/:id\", productUpdate);\n+\n+// GET request for one product.\n+router.get(\"/:id\", productDetail);\n+\n+//\n+\n // Handle product update on POST.\n /* const product_update_post = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName).doc(req.params.id);\n   ref.update(req.body);\n"
                },
                {
                    "date": 1699942722233,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,27 @@\n+/* eslint-disable max-len */\n const functions = require(\"firebase-functions\");\n const asyncHandler = require(\"express-async-handler\");\n \n // Config DB\n \n const admin = require(\"firebase-admin\");\n \n-const serviceAccount = require(\n-    \"../back-electiva-firebase-adminsdk-wjbei-6f37904c59.json\");\n+const serviceAccount = {\n+  \"type\": \"service_account\",\n+  \"project_id\": \"back-electiva\",\n+  \"private_key_id\": \"6f37904c593149e44f06ccf6922e22186f29484c\",\n+  \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCba24sXM7oTgzn\\njGhF2YITyIc9fMlAn5mQ9zTUSOi47JP+kFxi/Ah+i2CZ9ZjNukW6oliH7VhpDyYC\\nkAKm0BgdWX+rHvl+/OksmTaJtWw4Ua8KWnEBwZ2xjzEmPyul38TGlVi3uaxXDN44\\n/9k70c7txiNvnx+RxEzFKYT0f+Xvt+t/rMWvgppwlcu9i4G02DXnV3hx7RPmAZoe\\nbH9k+DntS7EWzDNxDVKhS8sM2wguP8UohRCH/ufh8PKmCjsTpUgVP1IYZgXuNYkh\\nZFQYI3lqfO1ZGnbIS6uYWwGDZsKV5GhhRTKGenwJa+VXKo1CVQqru2py2Vqd/6Y4\\nWy9e8uInAgMBAAECggEAIj7PNV4zxxMfm8uf1DhDhalrRzyeOauRElSuItJ32Ptj\\n9rUHblYbZwq9+96WT0pqf9+ywyykjO2mEe16cBgtIBZu351BG16N4GJYForPsC8r\\ncwwPl3P6k7u5+DP2IaQHPzx8Imt6kmnG82dIjfpCbrj4aOl2cs9+nPjzj045M5MK\\nOs7X1yknAeYwIfYUrER+rFbkqmGK/8Ud5fXC4CDEqneDf16UnM1cjivoNLuNcTzj\\nHpvwEMDwL/VIp+GHohihwL/Jus3T/XrPv41pGQJtDASg9L3M4I9yV9Q2MCfR8lOB\\nRF2tOkWkJHw00htAiXPFyX79MJJo966YbEHyaEyruQKBgQDbBU/As9Lkh8Ip8tBm\\nmsSDcRdLTN1XMfXm09o4HM6xIc4N9V5+VrCEjjS9n6tmKQUsEI5L5el1ChNA+f6w\\ngEPGL+W5CZw0vMKVHZ4gvZq6WjHmrif8F9+GQ9o/RvsvnS7F9pvyPdfTd0l2OQy4\\nCexhMwxu1FG1yecb7GxqAXqKiQKBgQC1qRoKbzXhoCgPhmvi46q/t2rWp32tzmn3\\nMBeIg4NEkt1XjvxWdKj+RG+2QX/5A9lhchwAo4UJvHoULuQ8/wCb+cxlOD56uEO2\\njfFbR0EvxRaPjB0hafB6QnkC5qS+rVcSc1TCGOoGExKEkBjN8sJca87jzPvt79I6\\nvH+YpF8bLwKBgG77hQs31AC7jjbldJbZjASy9MPSYkKB7YIXDffrGQ2G/Lvz/vr0\\nAKRazvzbgOXWmWlXxlNNYHxPK6x8QYO8qxstQDIAXagXkl4vUOZ0TYhqlei3jUlf\\n64NEtL3lwPjCpGXp7eHVVp0wUAhZJknHtYEXdhBfBDyi37o1lkYtE6RJAoGBAIOr\\nc/KINRe6zA6kseIcfpDDUy8O66tk562BMC2ElUrI4KIsQ34uxKa31/jUdPt67L8S\\nxHU6EJ3D/QBQFKKZekmTv7DGGZM9p+bT71LnzLnhMr8NIbgsX19eevO9VT/XyDrZ\\nWV/uSwHoJQ3sm+36vSHcCnNXCmul3k0wf5OV4FGFAoGBAIE/Aa86MCAB+eKA10pG\\nnapFXbxoCV1H7mJY61Vsmjt1DEqjyMxPaZyht0UBrYKaw55Usmf1KCAifUrEIvyq\\nJ8IYqElLUky4mj2N1kRtD83dAddCEVyKgG8Sj9C4yo6x6WiemufMFkmdgQ7maP5G\\nZBYIFx4mI4u7IsFgtxB6bawk\\n-----END PRIVATE KEY-----\\n\",\n+  \"client_email\": \"firebase-adminsdk-wjbei@back-electiva.iam.gserviceaccount.com\",\n+  \"client_id\": \"116991751212376815805\",\n+  \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n+  \"token_uri\": \"https://oauth2.googleapis.com/token\",\n+  \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n+  \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-wjbei%40back-electiva.iam.gserviceaccount.com\",\n+  \"universe_domain\": \"googleapis.com\",\n+};\n+/* const serviceAccount = require(\n+    \"../back-electiva-firebase-adminsdk-wjbei-6f37904c59.json\"); */\n \n admin.initializeApp({\n   credential: admin.credential.cert(serviceAccount),\n });\n"
                },
                {
                    "date": 1699942924555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,8 @@\n     return res.status(200).send(snapshot.data());\n   });\n });\n \n-\n // Handle product create on POST.\n const productCreate = asyncHandler(async (req, res, next) => {\n   const ref = db.collection(collectionName);\n   await ref.add(req.body);\n"
                },
                {
                    "date": 1699943143645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,8 +131,9 @@\n \n // GET request for one product.\n router.get(\"/:id\", productDetail);\n \n+app.use(\"/products\", router);\n //\n \n // Handle product update on POST.\n /* const product_update_post = asyncHandler(async (req, res, next) => {\n"
                },
                {
                    "date": 1699943953554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,8 +132,12 @@\n // GET request for one product.\n router.get(\"/:id\", productDetail);\n \n app.use(\"/products\", router);\n+app.use(\"/\", (req, res, next) => {\n+  // res.render('index', { title: 'Express 2' });\n+  res.send(\"index\");\n+});\n //\n \n // Handle product update on POST.\n /* const product_update_post = asyncHandler(async (req, res, next) => {\n"
                },
                {
                    "date": 1699943972264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n \n app.use(\"/products\", router);\n app.use(\"/\", (req, res, next) => {\n   // res.render('index', { title: 'Express 2' });\n-  res.send(\"index\");\n+  res.send(\"API BACKEND \");\n });\n //\n \n // Handle product update on POST.\n"
                },
                {
                    "date": 1699944219977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,8 @@\n router.get(\"/:id\", productDetail);\n \n app.use(\"/products\", router);\n app.use(\"/\", (req, res, next) => {\n-  // res.render('index', { title: 'Express 2' });\n   res.send(\"API BACKEND \");\n });\n //\n \n"
                },
                {
                    "date": 1699944382694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n router.get(\"/:id\", productDetail);\n \n app.use(\"/products\", router);\n app.use(\"/\", (req, res, next) => {\n-  res.send(\"API BACKEND \");\n+  res.send(\"API BACKEND Electiva\");\n });\n //\n \n // Handle product update on POST.\n"
                }
            ],
            "date": 1699853502474,
            "name": "Commit-0",
            "content": "const functions = require(\"firebase-functions\");\n\n// // Create and deploy your first functions\n// // https://firebase.google.com/docs/functions/get-started\n//\n// exports.helloWorld = functions.https.onRequest((request, response) => {\n//   functions.logger.info(\"Hello logs!\", {structuredData: true});\n//   response.send(\"Hello from Firebase!\");\n// });\nconst express = require(\"express\");\nconst cors = require(\"cors\");\nconst cookieParser = require(\"cookie-parser\");\nconst logger = require(\"morgan\");\nconst port = 3000;\n\nconst app = express();\n\napp.use(logger(\"dev\"));\napp.use(express.json());\napp.use(express.urlencoded({extended: false }));\napp.use(cookieParser());\napp.use(cors());\n\n\nconst indexRouter = require(\"./routes/index\");\nconst usersRouter = require(\"./routes/users\");\nconst productsRouter = require(\"./routes/products\")\n\napp.use(\"/\", indexRouter);\napp.use(\"/users\", usersRouter);\n\n\n//app.use(\"/\", indexRouter);\napp.use(\"/products\", productsRouter);\n\napp.listen(port, () => {\n    console.log(`Server is running on port ${port}`);\n})\n\nmodule.exports = app;\n"
        }
    ]
}